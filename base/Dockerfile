FROM --platform=linux/amd64 debian:bullseye
MAINTAINER A-Kyma srl.

ENV METEORD_DIR /opt/meteord
COPY scripts $METEORD_DIR

ARG NODE_VERSION
ENV NODE_VERSION ${NODE_VERSION:-14.21.3}
ONBUILD ENV NODE_VERSION ${NODE_VERSION:-14.21.3}

RUN bash $METEORD_DIR/init.sh

EXPOSE 80
RUN chmod +x $METEORD_DIR/run_app.sh
ENTRYPOINT bash $METEORD_DIR/run_app.sh
